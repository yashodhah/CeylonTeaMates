# .github/workflows/main.yml
name: TeaMates CI/CD

on:
  push:
    branches: ['**']   # every branch

permissions:
  id-token: write
  contents: read

env:
  AWS_REGION: ap-southeast-1
  ECR_REGISTRY: 376907302485.dkr.ecr.ap-southeast-1.amazonaws.com

jobs:
  ci:
    uses: ./.github/workflows/teaMates.yml
    with:
      services: |
        ["order-service","order-processing-service","notification-service"]
    secrets:
      OIDC_ROLE: arn:aws:iam::376907302485:role/AWS_LABS_OIDC_DEPLOYER
